<RootWidget>:
    orientation: "horizontal"
    padding: 6
    spacing: 6

    FloatLayout:
        size_hint_x: 0.75

        Image:
            source: "background.png"
            allow_stretch: True
            keep_ratio: True
            size_hint: 1, 1
            pos_hint: {'x':0, 'y':0}

        GolfGreen:
            id: golf
            size_hint: 1, 1
            pos_hint: {'x':0, 'y':0}

        # Hole Labels with ids so Python can update them safely
        Label:
            id: h1
            text: "H1: -"
            size_hint: None, None
            size: 100, 24
            font_size: 16

        Label:
            id: h2
            text: "H2: -"
            size_hint: None, None
            size: 100, 24
            font_size: 16

        Label:
            id: h3
            text: "H3: -"
            size_hint: None, None
            size: 100, 24
            font_size: 16

        Label:
            id: h4
            text: "H4: -"
            size_hint: None, None
            size: 100, 24
            font_size: 16

        Label:
            id: h5
            text: "H5: -"
            size_hint: None, None
            size: 100, 24
            font_size: 16

    BoxLayout:
        id: side_panel
        orientation: "vertical"
        size_hint_x: 0.25
        spacing: 10
        padding: 10
        canvas.before:
            Color:
                rgba: 0.2, 0.2, 0.2, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "Current Player: " + (golf.current_player if golf.current_player else "None")
            size_hint_y: None
            height: 28

        Label:
            id: players_label
            text: '\\n'.join(["{}: {}".format(p, golf.get_player_score(p)) for p in golf.players]) if golf.players else "No players"
            text_size: self.width, None
            halign: "left"
            valign: "top"
            size_hint_y: None
            height: self.texture_size[1] or 60

        BoxLayout:
            size_hint_y: None
            height: 40
            spacing: 5
            Button:
                text: "1 Player"
                on_release: golf.register_players(1)
            Button:
                text: "2 Players"
                on_release: golf.register_players(2)
            Button:
                text: "3 Players"
                on_release: golf.register_players(3)

        Button:
            text: "Start Game"
            size_hint_y: None
            height: 40
            on_release: golf.start_game()

        Button:
            text: "Replace Ball"
            size_hint_y: None
            height: 40
            # enabled only when game started and current player is first of round
            disabled: not (golf.game_started and golf.current_player_index == 0)
            on_release: golf.replace_ball()

        Button:
            text: "Next Player"
            size_hint_y: None
            height: 40
            on_release:
                root.ids.golf.next_player() if root and root.ids and root.ids.golf else None

        Label:
            text: "Round: " + str(golf.current_round)
            size_hint_y: None
            height: 28