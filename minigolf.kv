<RootWidget>:
    orientation: "horizontal"
    padding: 6
    spacing: 6

    FloatLayout:
        size_hint_x: 0.75

        # background image that preserves aspect ratio
        Image:
            source: "background.jpeg"
            fit_mode: "contain"
            size_hint: 1, 1
            pos: self.parent.pos

        GolfGreen:
            id: golf
            size: self.size
            pos: self.pos

        # Hole 1 (drawn using scaled position)
# Hole 1
        Widget:
            canvas:
                Color:
                    rgba: 1, 1, 1, 1
                Ellipse:
                    pos: (golf.get_scaled_hole_pos(golf.holes[0])[0] - golf.holes[0]['radius'], golf.get_scaled_hole_pos(golf.holes[0])[1] - golf.holes[0]['radius'])
                    size: (golf.holes[0]['radius']*2, golf.holes[0]['radius']*2)
        Label:
            text: "H1: " + (str(golf.holes[0].get('last_points')) if golf.holes[0].get('last_points') is not None else "-")
            size_hint: None, None
            size: 100, 32
            font_size: 20
            pos: (golf.get_scaled_hole_pos(golf.holes[0])[0] - self.width/2, golf.get_scaled_hole_pos(golf.holes[0])[1] + golf.holes[0]['radius'])

        # Hole 2
        # Hole 2
        Widget:
            canvas:
                Color:
                    rgba: 1, 1, 1, 1
                Ellipse:
                    pos: (golf.get_scaled_hole_pos(golf.holes[1])[0] - golf.holes[1]['radius'], golf.get_scaled_hole_pos(golf.holes[1])[1] - golf.holes[1]['radius'])
                    size: (golf.holes[1]['radius']*2, golf.holes[1]['radius']*2)
        Label:
            text: "H2: " + (str(golf.holes[1].get('last_points')) if golf.holes[1].get('last_points') is not None else "-")
            size_hint: None, None
            size: 100, 32
            font_size: 20
            pos: (golf.get_scaled_hole_pos(golf.holes[1])[0] - self.width/2, golf.get_scaled_hole_pos(golf.holes[1])[1] + golf.holes[1]['radius'])

        # ball visual
        Widget:
            canvas:
                Color:
                    rgba: 1, 1, 1, 1
                Ellipse:
                    pos: (golf.x + golf.ball_x - 10, golf.y + golf.ball_y - 10)
                    size: (20, 20)

    # Right: scoreboard pane
    BoxLayout:
        orientation: "vertical"
        size_hint_x: 0.25
        spacing: 8

        Label:
            text: "Scoreboard"
            size_hint_y: None
            height: 40
            bold: True

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            GridLayout:
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: 4
                padding: 0

                Label:
                    id: scoreboard_text
                    text: root.ids.scoreboard_widget.display_text if root.ids.get('scoreboard_widget') else "No readings yet"
                    halign: "left"
                    valign: "top"
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]

                Label:
                    text: "Nearest Hole Pts: " + (root.ids.golf.live_text if root.ids.get('golf') else "-")
                    size_hint_y: None
                    height: 40
                    halign: "left"
                    valign: "middle"
                    text_size: self.width, None

        BoxLayout:
            size_hint_y: None
            height: 44
            spacing: 6

            Button:
                text: "Reset"
                on_release:
                    if root.ids.get('scoreboard_widget'): root.ids.scoreboard_widget.clear()

# Provide hidden Scoreboard so root.ids always has it
Scoreboard:
    id: scoreboard_widget
    size_hint_x: None
    width: 0