<RootWidget>:
    orientation: "horizontal"
    padding: 6
    spacing: 6

    FloatLayout:
        size_hint_x: 0.75

        # Background Image
        Image:
            source: "background.png"
            allow_stretch: True
            keep_ratio: True
            size_hint: 1, 1
            pos_hint: {'x':0, 'y':0}

        # GolfGreen overlay
        GolfGreen:
            id: golf
            size_hint: 1, 1
            pos_hint: {'x':0, 'y':0}

        # Hole Labels
        Label:
            text: "H1: " + (str(golf.holes[0].get('last_points')) if golf.holes[0].get('last_points') is not None else "-")
            size_hint: None, None
            size: 100, 24
            font_size: 16
            pos: (golf.get_scaled_hole_pos(golf.holes[0])[0] - self.width/2, golf.get_scaled_hole_pos(golf.holes[0])[1] + 12)

        Label:
            text: "H2: " + (str(golf.holes[1].get('last_points')) if golf.holes[1].get('last_points') is not None else "-")
            size_hint: None, None
            size: 100, 24
            font_size: 16
            pos: (golf.get_scaled_hole_pos(golf.holes[1])[0] - self.width/2, golf.get_scaled_hole_pos(golf.holes[1])[1] + 12)

        Label:
            text: "H3: " + (str(golf.holes[2].get('last_points')) if golf.holes[2].get('last_points') is not None else "-")
            size_hint: None, None
            size: 100, 24
            font_size: 16
            pos: (golf.get_scaled_hole_pos(golf.holes[2])[0] - self.width/2, golf.get_scaled_hole_pos(golf.holes[2])[1] + 12)

        Label:
            text: "H4: " + (str(golf.holes[3].get('last_points')) if golf.holes[3].get('last_points') is not None else "-")
            size_hint: None, None
            size: 100, 24
            font_size: 16
            pos: (golf.get_scaled_hole_pos(golf.holes[3])[0] - self.width/2, golf.get_scaled_hole_pos(golf.holes[3])[1] + 12)

        Label:
            text: "H5: " + (str(golf.holes[4].get('last_points')) if golf.holes[4].get('last_points') is not None else "-")
            size_hint: None, None
            size: 100, 24
            font_size: 16
            pos: (golf.get_scaled_hole_pos(golf.holes[4])[0] - self.width/2, golf.get_scaled_hole_pos(golf.holes[4])[1] + 12)

    # Side Panel
    BoxLayout:
        id: side_panel
        orientation: "vertical"
        size_hint_x: 0.25
        spacing: 10
        padding: 10
        canvas.before:
            Color:
                rgba: 0.2, 0.2, 0.2, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Current Player Info
        Label:
            text: "Current Player: " + (golf.current_player if golf.current_player else "None")
            size_hint_y: None
            height: 28

        # Players Scores
        Label:
            id: players_label
            text: '\n'.join(["{}: {}".format(p, golf.get_player_score(p)) for p in golf.players]) if golf.players else "No players"
            text_size: self.width, None
            halign: "left"
            valign: "top"
            size_hint_y: None
            height: self.texture_size[1] or 60

        # Player buttons
        BoxLayout:
            size_hint_y: None
            height: 40
            spacing: 5
            Button:
                text: "1 Player"
                on_release: golf.register_players(1)
            Button:
                text: "2 Players"
                on_release: golf.register_players(2)
            Button:
                text: "3 Players"
                on_release: golf.register_players(3)

        # Game controls
        Button:
            text: "Start Game"
            size_hint_y: None
            height: 40
            on_release: golf.start_game()
        Button:
            text: "Next Player"
            size_hint_y: None
            height: 40
            on_release: golf.next_player()
        Label:
            text: "Round: " + str(golf.current_round)
            size_hint_y: None
            height: 28
